import streamlit as st
import pandas as pd
import random
import matplotlib.pyplot as plt

st.set_page_config(page_title="ğŸ”¥ ìš”ì¦˜ ë­ê°€ ìœ í–‰í• ê¹Œ?", layout="wide")

# ------------------ ìƒ˜í”Œ ë°ì´í„° ------------------
data = {
    "í•­ëª©": ["ì œë¡œì½œë¼", "í¬ë¡ìŠ¤", "ìŠ¬ë¦¬í¼ íŒ¨ì…˜", "ì˜¤ë²„í• ì…”ì¸ ", "í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´", "ëª¬ìŠ¤í„° ì—ë„ˆì§€", "ì§„ë˜ë°°ê¸° ë°ˆ", "ì¼ë³¸ ë¼ë©˜", "í—¬ìŠ¤ ë³´ì¶©ì œ", "í•˜ì´ë³¼"],
    "ê²€ìƒ‰ëŸ‰": [random.randint(50, 100) for _ in range(10)],
    "íŒë§¤ëŸ‰": [random.randint(50, 100) for _ in range(10)],
    "ì¸ê¸°ë„": [random.randint(50, 100) for _ in range(10)],
}

df = pd.DataFrame(data)

# ------------------ ì œëª© ------------------
st.title("âœ¨ ìš”ì¦˜ ëœ¨ëŠ” íŠ¸ë Œë“œ ë¶„ì„ê¸°")
st.write("ê²€ìƒ‰ëŸ‰, íŒë§¤ëŸ‰, ì¸ê¸°ë„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ì§€ê¸ˆ ìœ í–‰í•˜ëŠ” ê²ƒë“¤**ì„ í™•ì¸í•´ë³´ì„¸ìš”!")

# ------------------ ì¸ê¸° TOP 3 ------------------
st.subheader("ğŸ”¥ ì§€ê¸ˆ ê°€ì¥ í•«í•œ TOP 3")
df["ì¢…í•©ì ìˆ˜"] = df[["ê²€ìƒ‰ëŸ‰", "íŒë§¤ëŸ‰", "ì¸ê¸°ë„"]].mean(axis=1)
top3 = df.sort_values("ì¢…í•©ì ìˆ˜", ascending=False).head(3)

for i, row in top3.iterrows():
    st.markdown(f"### ğŸ† {row['í•­ëª©']}  â€”  ì ìˆ˜: {row['ì¢…í•©ì ìˆ˜']:.1f}")

# ------------------ ë°ì´í„° ì‹œê°í™” ------------------
st.subheader("ğŸ“Š íŠ¸ë Œë“œ ì§€í‘œ ë¹„êµ")
selected = st.multiselect("ë¹„êµí•˜ê³  ì‹¶ì€ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”:", df["í•­ëª©"].tolist(), default=top3["í•­ëª©"].tolist())

if selected:
    fig, ax = plt.subplots()
    df_selected = df[df["í•­ëª©"].isin(selected)]
    df_selected.set_index("í•­ëª©")["ê²€ìƒ‰ëŸ‰","íŒë§¤ëŸ‰","ì¸ê¸°ë„"].plot(kind="bar", ax=ax)
    st.pyplot(fig)

# ------------------ ìƒì„¸ ì¶”ì²œ ------------------
st.subheader("ğŸ’¡ íŠ¸ë Œë“œ ë¶„ì„ ë° ì¶”ì²œ")
choice = st.selectbox("ê´€ì‹¬ ìˆëŠ” ë¶„ì•¼ë¥¼ ê³¨ë¼ë³´ì„¸ìš”:", ["ìŒì‹", "íŒ¨ì…˜", "ë°ˆ", "ì¸ë¬¼", "ê¸°íƒ€"])

if choice == "ìŒì‹":
    st.success("ğŸœ ìš”ì¦˜ ë¼ë©˜, í•˜ì´ë³¼ ê°™ì€ **ì¼ë³¸ì‹ ìŒì‹ê³¼ ì£¼ë¥˜**ê°€ í¬ê²Œ ëœ¨ê³  ìˆì–´ìš”!")
elif choice == "íŒ¨ì…˜":
    st.success("ğŸ‘Ÿ ìŠ¬ë¦¬í¼ íŒ¨ì…˜, ì˜¤ë²„í• ì…”ì¸ ê°€ ì—¬ë¦„ì²  í•« ì•„ì´í…œì´ì—ìš”!")
elif choice == "ë°ˆ":
    st.success("ğŸ˜‚ 'ì§„ë˜ë°°ê¸°' ê°™ì€ ì§§ê³  ì¤‘ë…ì„± ê°•í•œ ë°ˆì´ ëŒ€ì„¸!")
elif choice == "ì¸ë¬¼":
    st.success("ğŸ¤– 'í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´' ê°™ì€ AI ê´€ë ¨ ì§ì—…ì´ ëœ¨ëŠ” ì¤‘!")
else:
    st.info("ğŸ“ˆ ë‹¤ì–‘í•œ íŠ¸ë Œë“œê°€ ë™ì‹œì— í™•ì‚° ì¤‘ì´ë‹ˆ, ë³µí•©ì ì¸ ê´€ì‹¬ì‚¬ê°€ ìœ ë¦¬í•´ìš”!")

# ------------------ ë°ì´í„° í…Œì´ë¸” ------------------
st.subheader("ğŸ“‹ ì›ë³¸ ë°ì´í„°")
st.dataframe(df)

