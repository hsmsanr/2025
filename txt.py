import streamlit as st

# -----------------------
# ìƒ˜í”Œ íŠ¸ë Œë“œ ë°ì´í„°
# -----------------------
trends = {
    "ì¸ë¬¼": [
        {"name": "ì•„ì´ìœ ", "desc": "ìŒì•…ê³¼ ë“œë¼ë§ˆì—ì„œ í™œì•½í•˜ë©° ê¾¸ì¤€í•œ ì¸ê¸° ìœ ì§€", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","í•™êµ","êµì™¸"], "interest": ["ìŒì•…","ì—°ì˜ˆì¸"]},
        {"name": "ì†í¥ë¯¼", "desc": "í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ í™œì•½ìœ¼ë¡œ ì „ä¸–ëŒ€ì  ì¸ê¸°", "age": ["10ëŒ€","20ëŒ€","30ëŒ€","40ëŒ€"], "env": ["ë„ì‹œ","êµì™¸"], "interest": ["ìŠ¤í¬ì¸ "]},
        {"name": "ë‰´ì§„ìŠ¤", "desc": "ì‹ ì„ í•œ ìŒì•…ê³¼ ìŠ¤íƒ€ì¼ë¡œ Zì„¸ëŒ€ ì•„ì´ì½˜", "age": ["10ëŒ€","20ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["ìŒì•…","íŒ¨ì…˜"]},
        {"name": "ì´ê°•ì¸", "desc": "ì¶•êµ¬ ìŠ¤íƒ€ë¡œ ê¸‰ë¶€ìƒ", "age": ["10ëŒ€","20ëŒ€"], "env": ["ë„ì‹œ","í•™êµ"], "interest": ["ìŠ¤í¬ì¸ "]},
        {"name": "ìœ ì¬ì„", "desc": "êµ­ë¯¼MCë¡œ ê¾¸ì¤€í•œ ì˜ˆëŠ¥ê³„ ì¸ê¸°", "age": ["20ëŒ€","30ëŒ€","40ëŒ€"], "env": ["ë„ì‹œ","êµì™¸"], "interest": ["ì˜ˆëŠ¥"]}
    ],
    "ìŒì‹": [
        {"name": "ë§ˆë¼íƒ•", "desc": "ì¤‘ë…ì„± ê°•í•œ ë§›ìœ¼ë¡œ ì Šì€ ì¸µ ì¸ê¸°", "age": ["10ëŒ€","20ëŒ€"], "env": ["ë„ì‹œ","í•™êµ"], "interest": ["ìŒì‹"]},
        {"name": "í¬ë¡œí”Œ", "desc": "ì¹´í˜ ë””ì €íŠ¸ë¡œ SNS ì¸ê¸°", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","í•™êµ"], "interest": ["ìŒì‹"]},
        {"name": "ë–¡ë³¶ì´", "desc": "ëŒ€í•œë¯¼êµ­ ëŒ€í‘œ ê¸¸ê±°ë¦¬ ìŒì‹", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["ìŒì‹"]},
        {"name": "ìƒëŸ¬ë“œ", "desc": "ê±´ê°•ì‹ìœ¼ë¡œ MZì„¸ëŒ€ ê´€ì‹¬ ì¦ê°€", "age": ["20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","êµì™¸"], "interest": ["ìŒì‹","ê±´ê°•"]},
        {"name": "ì‚¼ê²¹ì‚´", "desc": "êµ­ë¯¼ ê³ ê¸° ë©”ë‰´, ì „ä¸–ëŒ€ì  ì¸ê¸°", "age": ["10ëŒ€","20ëŒ€","30ëŒ€","40ëŒ€"], "env": ["ë„ì‹œ","êµì™¸","í•™êµ"], "interest": ["ìŒì‹"]}
    ],
    "íŒ¨ì…˜": [
        {"name": "í¬ë¡ìŠ¤", "desc": "í¸ë¦¬í•¨ê³¼ ê¾¸ì•ˆê¾¸ íŒ¨ì…˜ìœ¼ë¡œ ìë¦¬ì¡ìŒ", "age": ["10ëŒ€","20ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["íŒ¨ì…˜"]},
        {"name": "ì™€ì´ë“œíŒ¬ì¸ ", "desc": "í™í•œ ë¶„ìœ„ê¸°ë¡œ 10ëŒ€~20ëŒ€ ìœ í–‰", "age": ["10ëŒ€","20ëŒ€"], "env": ["ë„ì‹œ","í•™êµ"], "interest": ["íŒ¨ì…˜"]},
        {"name": "ë‰´ë°œë€ìŠ¤ ìš´ë™í™”", "desc": "í¸ì•ˆí•¨ê³¼ ë ˆíŠ¸ë¡œ ê°ì„±ìœ¼ë¡œ ì¸ê¸°", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","êµì™¸"], "interest": ["íŒ¨ì…˜"]},
        {"name": "íŠ¸ë ˆì´ë‹ ì…‹ì—…", "desc": "í¸í•œ ìŠ¤íƒ€ì¼ì„ ì¤‘ì‹œí•˜ëŠ” ê¾¸ì•ˆê¾¸ íŠ¸ë Œë“œ", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["íŒ¨ì…˜"]},
        {"name": "ì•¼êµ¬ ëª¨ì", "desc": "ë°ì¼ë¦¬ë£© í•„ìˆ˜ ì•„ì´í…œ", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","í•™êµ"], "interest": ["íŒ¨ì…˜"]}
    ],
    "ë°ˆ": [
        {"name": "ì§„ë˜ë°°ê¸°", "desc": "í¥ê²¨ìš´ ë©œë¡œë””ì™€ ë°ˆìœ¼ë¡œ ê¸‰ë¶€ìƒ", "age": ["10ëŒ€","20ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["ë°ˆ","ìŒì•…"]},
        {"name": "ì˜¤ë§ˆì—ì™€ ëª¨ ì‹ ë°ì´ë£¨", "desc": "ì• ë‹ˆ ëŒ€ì‚¬ë¡œ ìœ í–‰", "age": ["10ëŒ€","20ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["ë°ˆ"]},
        {"name": "í‚¹ë°›ë„¤", "desc": "ì‹ ì¡°ì–´ ë°ˆìœ¼ë¡œ ë„ë¦¬ ì‚¬ìš©", "age": ["10ëŒ€","20ëŒ€"], "env": ["í•™êµ","ë„ì‹œ"], "interest": ["ë°ˆ"]},
        {"name": "ì§¤ë‘ì´ ì§¤", "desc": "ì»¤ë®¤ë‹ˆí‹° ì¤‘ì‹¬ìœ¼ë¡œ í™•ì‚°", "age": ["10ëŒ€","20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","í•™êµ"], "interest": ["ë°ˆ"]},
        {"name": "ì´ê²Œ ë‚˜ë¼ëƒ", "desc": "í’ìì™€ ë°ˆìœ¼ë¡œ ì“°ì„", "age": ["20ëŒ€","30ëŒ€"], "env": ["ë„ì‹œ","êµì™¸"], "interest": ["ë°ˆ"]}
    ]
}

# -----------------------
# UI
# -----------------------
st.title("ğŸ”¥ ìš”ì¦˜ íŠ¸ë Œë“œ ì¶”ì²œ ì›¹ì•±")

st.sidebar.header("ì‚¬ìš©ì ì •ë³´ ì…ë ¥")

age = st.sidebar.selectbox("ì—°ë ¹ëŒ€", ["ì„ íƒí•˜ì„¸ìš”","10ëŒ€","20ëŒ€","30ëŒ€","40ëŒ€"])
env = st.sidebar.selectbox("ì£¼ë³€í™˜ê²½", ["ì„ íƒí•˜ì„¸ìš”","ë„ì‹œ","êµì™¸","í•™êµ"])
interest = st.sidebar.selectbox("ê´€ì‹¬ì‚¬", ["ì„ íƒí•˜ì„¸ìš”","ìŒì•…","ìŠ¤í¬ì¸ ","íŒ¨ì…˜","ìŒì‹","ë°ˆ","ì—°ì˜ˆì¸","ì˜ˆëŠ¥","ê±´ê°•"])
mood = st.sidebar.selectbox("ì‹¬ì •/ë¶„ìœ„ê¸°", ["ì„ íƒí•˜ì„¸ìš”","í™í•˜ê²Œ","ë°ê²Œ","í¸ì•ˆí•˜ê²Œ","ì§‘ì¤‘í•˜ê³  ì‹¶ìŒ"])

# -----------------------
# ì¶”ì²œ ë¡œì§
# -----------------------
if age != "ì„ íƒí•˜ì„¸ìš”" and env != "ì„ íƒí•˜ì„¸ìš”" and interest != "ì„ íƒí•˜ì„¸ìš”" and mood != "ì„ íƒí•˜ì„¸ìš”":
    st.subheader(f"âœ¨ {age}, {env}, ê´€ì‹¬: {interest}, ë¶„ìœ„ê¸°: {mood} â†’ ë§ì¶¤ íŠ¸ë Œë“œ TOP5")

    for category, items in trends.items():
        # ì¡°ê±´ê³¼ ë§ëŠ” ë°ì´í„° ìš°ì„  ì„ íƒ
        filtered = [i for i in items if age in i["age"] and env in i["env"] and interest in i["interest"]]

        # 5ê°œ ë¯¸ë§Œì´ë©´ ê°™ì€ ë¶„ì•¼ì—ì„œ ì±„ì›Œì„œ ë³´ì¶©
        if len(filtered) < 5:
            extra = [i for i in items if i not in filtered]
            filtered += extra[:5 - len(filtered)]

        # 5ê°œ ì´ìƒì´ë©´ ìƒìœ„ 5ê°œë§Œ
        final_items = filtered[:5]

        # ë¶„ì•¼ ì œëª© ì¶œë ¥
        st.markdown(f"#### ğŸ“Œ {category} TOP5")

        # ì„¸ë¡œ ë§‰ëŒ€ê·¸ë˜í”„ (Streamlit ê¸°ë³¸)
        st.bar_chart([1]*len(final_items), x=[i["name"] for i in final_items])

        # ì„¤ëª… ì¶œë ¥
        for i, trend in enumerate(final_items, start=1):
            st.write(f"**{i}. {trend['name']}** - {trend['desc']}")

else:
    st.info("ğŸ‘† ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”!")
