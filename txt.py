import streamlit as st
import pandas as pd
import random

st.set_page_config(page_title="ğŸ”¥ ìš”ì¦˜ ë­ê°€ ìœ í–‰í• ê¹Œ?", layout="wide")

# ------------------ ìƒ˜í”Œ ë°ì´í„° ------------------
items = ["ì œë¡œì½œë¼", "í¬ë¡ìŠ¤", "ìŠ¬ë¦¬í¼ íŒ¨ì…˜", "ì˜¤ë²„í• ì…”ì¸ ", 
         "í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´", "ëª¬ìŠ¤í„° ì—ë„ˆì§€", "ì§„ë˜ë°°ê¸° ë°ˆ", 
         "ì¼ë³¸ ë¼ë©˜", "í—¬ìŠ¤ ë³´ì¶©ì œ", "í•˜ì´ë³¼"]

# ë…„ë„ë³„ ê²€ìƒ‰ëŸ‰ ë°ì´í„° (2019~2025)
years = list(range(2019, 2026))
trend_data = {"ë…„ë„": years}
for item in items:
    trend_data[item] = [random.randint(30, 100) for _ in years]

df_year = pd.DataFrame(trend_data)

# í˜„ì¬ ì‹œì  ë°ì´í„°
df_now = pd.DataFrame({
    "í•­ëª©": items,
    "ê²€ìƒ‰ëŸ‰": [random.randint(50, 100) for _ in items],
    "íŒë§¤ëŸ‰": [random.randint(50, 100) for _ in items],
    "ì¸ê¸°ë„": [random.randint(50, 100) for _ in items],
})
df_now["ì¢…í•©ì ìˆ˜"] = df_now[["ê²€ìƒ‰ëŸ‰", "íŒë§¤ëŸ‰", "ì¸ê¸°ë„"]].mean(axis=1)

# ------------------ ì œëª© ------------------
st.title("âœ¨ ìš”ì¦˜ ëœ¨ëŠ” íŠ¸ë Œë“œ ë¶„ì„ê¸°")
st.write("ê²€ìƒ‰ëŸ‰, íŒë§¤ëŸ‰, ì¸ê¸°ë„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ì‹œê°„ì— ë”°ë¥¸ ìœ í–‰ ë³€í™”**ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!")

# ------------------ ì¸ê¸° TOP 3 ------------------
st.subheader("ğŸ”¥ ì§€ê¸ˆ ê°€ì¥ í•«í•œ TOP 3")
top3 = df_now.sort_values("ì¢…í•©ì ìˆ˜", ascending=False).head(3)

for i, row in top3.iterrows():
    st.markdown(f"### ğŸ† {row['í•­ëª©']}  â€”  ì ìˆ˜: {row['ì¢…í•©ì ìˆ˜']:.1f}")

# ------------------ ì‹œê°„ë³„ ë³€í™” ------------------
st.subheader("â³ ì‹œê°„ì— ë”°ë¥¸ íŠ¸ë Œë“œ ë³€í™”")
selected_items = st.multiselect("ì‹œê°„ ë³€í™”ê°€ ê¶ê¸ˆí•œ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”:", items, default=top3["í•­ëª©"].tolist())

if selected_items:
    st.line_chart(df_year.set_index("ë…„ë„")[selected_items])

# ------------------ ìƒì„¸ ì¶”ì²œ ------------------
st.subheader("ğŸ’¡ íŠ¸ë Œë“œ ë¶„ì„ ë° ì¶”ì²œ")
choice = st.selectbox("ê´€ì‹¬ ìˆëŠ” ë¶„ì•¼ë¥¼ ê³¨ë¼ë³´ì„¸ìš”:", ["ìŒì‹", "íŒ¨ì…˜", "ë°ˆ", "ì¸ë¬¼", "ê¸°íƒ€"])

if choice == "ìŒì‹":
    st.success("ğŸœ ìš”ì¦˜ ë¼ë©˜, í•˜ì´ë³¼ ê°™ì€ **ì¼ë³¸ì‹ ìŒì‹ê³¼ ì£¼ë¥˜**ê°€ í¬ê²Œ ëœ¨ê³  ìˆì–´ìš”!")
elif choice == "íŒ¨ì…˜":
    st.success("ğŸ‘Ÿ ìŠ¬ë¦¬í¼ íŒ¨ì…˜, ì˜¤ë²„í• ì…”ì¸ ê°€ ì—¬ë¦„ì²  í•« ì•„ì´í…œì´ì—ìš”!")
elif choice == "ë°ˆ":
    st.success("ğŸ˜‚ 'ì§„ë˜ë°°ê¸°' ê°™ì€ ì§§ê³  ì¤‘ë…ì„± ê°•í•œ ë°ˆì´ ëŒ€ì„¸!")
elif choice == "ì¸ë¬¼":
    st.success("ğŸ¤– 'í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´' ê°™ì€ AI ê´€ë ¨ ì§ì—…ì´ ëœ¨ëŠ” ì¤‘!")
else:
    st.info("ğŸ“ˆ ë‹¤ì–‘í•œ íŠ¸ë Œë“œê°€ ë™ì‹œì— í™•ì‚° ì¤‘ì´ë‹ˆ, ë³µí•©ì ì¸ ê´€ì‹¬ì‚¬ê°€ ìœ ë¦¬í•´ìš”!")

# ------------------ ë°ì´í„° í…Œì´ë¸” ------------------
st.subheader("ğŸ“‹ ì›ë³¸ ë°ì´í„° (í˜„ì¬ ì‹œì )")
st.dataframe(df_now)

st.subheader("ğŸ“‹ ì‹œê°„ë³„ ê²€ìƒ‰ëŸ‰ ë°ì´í„° (ë…„ë„ë³„)")
st.dataframe(df_year)

